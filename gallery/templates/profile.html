{% extends 'base.html' %}
{% load static %}
{% block content %}


<!-- Profile Header -->
<div class="container my-5">
  <div class="card profile-card text-center p-4">
    <div class="bg-light rounded-top" style="height:120px;"></div>
    {% if user.profile.image %}
      <img src="{{user.profile.image.url}}" class="profile-img rounded-circle mx-auto" alt="Profile">
    {% else %}
      <img src="{% static 'default.jpg' %}" class="profile-img rounded-circle mx-auto" alt="Profile">
    {% endif %}
    <h4 class="mt-3 mb-0 text-capitalize">{{ user.username }}</h4>
    <p class="text-muted">{{user.profile.bio}}</p>

    <div class="d-flex justify-content-center gap-2 mb-3">
        <a class="btn btn-primary px-4" href="{% url 'edit_profile' %}">Edit Profile</a>
    </div>

    <div class="row text-center">
      <div class="col">
        <div class="stat-number">{{photo_count}}</div>
        <small class="text-muted">Photos</small>
      </div>

    </div>
  </div>

  <!-- Info Section -->
  <div class="row mt-4 g-4">
    <div class="col-md-6">
      <div class="card p-4 h-100">
        <h5>About Me</h5>
        <p class="text-muted mb-0">
          {{user.profile.bio}}
        </p>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card p-4 h-100">
        <h5>Contact Info</h5>
        <p class="mb-1"><i class="fa-regular text-primary fa-envelope pe-3"></i>{{user.profile.email|default:'Not provided'}}</p>
        <p class="mb-1"><i class="fa-solid text-primary fa-phone pe-3"></i>{{user.profile.contact|default:'Not provided'}}</p>
        <p class="mb-0"><i class="fa-solid text-primary fa-map-marker pe-3"></i>Univerity of Ibadan</p>
      </div>
    </div>
  </div>

  <!-- Gallery -->
  <div class="card mt-4 p-4">
    <div class="row row-cols-2 row-cols-md-4 g-3" data-masonry='{"percentPosition": true }'>
        {% for photo in photo_details %}
            <div class="col">
                <div class="card">
                  <img src="{{photo.image.url}}" class="gallery-img">
                  <div class="card-body d-flex justify-content-between flex-column">
                    <p class="card-title text-capitalize">{{photo.caption}}</p>
                    <p class="card-title"><i class="fa-regular fa-calendar me-1"></i>{{photo.event.date}}</p>
                  </div>
                </div>

            </div>

        {% empty %}
            <p class="text-muted">You haven't uploaded any photos yet.</p>

        {% endfor %}
            
    </div>
  </div>
</div>

{% endblock %}